
<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>TTSS</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
     <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    
     <script>
    $(document).ready(function () {
        // Add keyup event to the Treasury ID input field
        $("#treasuryId").keyup(function () {
            // Get the entered Treasury ID
            var treasuryId = $(this).val();
             
 
            $.ajax({
                type: "GET",
                url: "/api/findteacher?treasuryid=" + treasuryId,
                dataType: "json",
                success: function (response) {
                    var treasury_id = response[0].treasuryid;
                    var participant_name = response[0].username + ' '+response[0].surname;
                    var school_complex_id = response[0].workplace;
                    var email = response[0].teacher_email;
                    var mobile = response[0].mobilenumberteacher;
 
                    $("#treasuryId").val(treasury_id);
                    $("#participantName").val(participant_name);
                    $("#schoolComplexId").val(school_complex_id);
                    $("#email").val(email);
                    $("#mobile").val(mobile);
                    
                },
                error: function (error) {
                    console.log("Error:", error);
                }
            });
        });
    });
    </script>
    
</head>
 
<body>
    <div class="d-flex" id="wrapper">
        <!-- Sidebar-->
        <div class="border-end bg-white" id="sidebar-wrapper">
            <div class="sidebar-heading border-bottom bg-light">
                <img src="./assets/loggoo.png"  width="110" height="68">
            </div>
            <div class="list-group list-group-flush">
                <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"
                    onclick="showTab('tab1')">Dashboard</a>
                <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"
                    onclick="showTab('tab2')">Apply Traning</a>
                <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"
                    onclick="showTab('tab3')">View Traning</a>
                <!-- Master Setup  menu -->
            </div>
        </div>
        <!-- Page content wrapper-->
        <div id="page-content-wrapper">
            <!-- Top navigation-->
             <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom" style="width: 180%;" >
                <div class="container-fluid">
                    <div  id="sidebarToggle" >
                        <div style="width: 35px; height: 5px; background-color: black; margin: 6px 0;"></div>
                        <div style="width: 35px; height: 5px; background-color: black; margin: 6px 0;"></div>
                        <div style="width: 35px; height: 5px; background-color: black; margin: 6px 0;"></div>
                    </div>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation"><span>
                            class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <h1 class="nav-link ms-auto text-center text-info w-100" style="
                          position: relative;
                          top:-30px;
                          right: -200px;
                          font-size: 25px;
                        justify-content: center;
                        margin-top: 40px;
 
                        color: blue;">Teacher Training Support System</h1> <br>
                         <h2 class="nav-link ms-auto text-center text-info w-100" style=" position: relative;
                         top:10px;
                         right: 330px;
                         font-size: 25px;
                       justify-content: center;
                       margin-top: 40px;
                       color:red;">Govt Of AndhraPradesh</h2>
 
                       
                        <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                           
                            <li class="nav-item dropdown">
                               
                                   <img  src="./assets/logo.png" width="80" height="68"/>
                               
                             
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- Page content-->
            <!-- ######################### View Achedemic calender #################### -->
            <div class="container mt-2 tab-content" id="tab1" style="display: none;">
 
 
                <div class=""><b>Dashboard</b>
                </div>
                <div class="row mt-2">
                    <div class="col-sm-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Special title treatment</h5>
                                <p class="card-text">With supporting text below as a natural lead-in to additional
                                    content
                                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Provident rem laboriosam
                                    deserunt vel ex. Ipsum, perspiciatis. Nulla impedit animi inventore odit sit iure
                                    ex? Praesentium aspernatur ratione autem sint error..</p>
                                <a href="#" class="btn btn-primary">Go somewhere</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Special title treatment</h5>
                                <p class="card-text">With supporting text below as a natural lead-in to additional
                                    content.
                                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione nisi, alias cum
                                    dolorum minus quidem eius ab placeat quod! Quibusdam saepe culpa accusamus, nam
                                    ratione voluptate vel? Minus, aliquid illum?
                                </p>
                                <a href="#" class="btn btn-primary">Go somewhere</a>
                            </div>
                        </div>
                    </div>
                </div>
 
 
                <div class="row mt-2">
                    <div class="col-sm-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Special title treatment</h5>
                                <p class="card-text">With supporting text below as a natural lead-in to additional
                                    content
                                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Provident rem laboriosam
                                    deserunt vel ex. Ipsum, perspiciatis. Nulla impedit animi inventore odit sit iure
                                    ex? Praesentium aspernatur ratione autem sint error..</p>
                                <a href="#" class="btn btn-primary">Go somewhere</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Special title treatment</h5>
                                <p class="card-text">With supporting text below as a natural lead-in to additional
                                    content.
                                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione nisi, alias cum
                                    dolorum minus quidem eius ab placeat quod! Quibusdam saepe culpa accusamus, nam
                                    ratione voluptate vel? Minus, aliquid illum?
                                </p>
                                <a href="#" class="btn btn-primary">Go somewhere</a>
                            </div>
                        </div>
                    </div>
                </div>
 
 
            </div>

            <!-- Traning Schudule Form -->
            <div class="container tab-content " id="tab2"  style="position: relative; right:-220px; height: 100%;">
                <!-- Form Start  -->
                <div class="mt-1"><b>Apply Traning</b>
                </div>
                
 
                <div class="container mt-2">
                    <div class="card">
                        <div class="card-body">
                        <div class="row">
                            <div class="mb-2 col-5">
                                <label for="exampleFormControlInput1" class="form-label text-danger">
                                    *Goverment or Treasury Employee: </label>
                            </div>
                            <div class="mb-2 col-1">
                            <input type="radio" name="options" value="enable" id="enableRadio"> Yes
                            </div>
                            <div class="mb-2 col-2">
                                <input type="radio" name="options" value="disable" id="disableRadio"> No
                            </div>
                            
                        </div>
                        <form >
                            <div class="row mt-3">
                                <div class="mb-2 col-3">
                                    <label for="treasuryId" class="form-label">Treasury Id</label>
                                        <input type="text" class="form-control" id="treasuryId"  disabled>
                                    
                                </div>
                                <div class="mb-2 col-3">
                                    <label for="participantName" class="form-label">Participant
                                        Name</label>
                                    <input type="input" class="form-control"
                                        id="participantName" >
                                </div>
                                <div class="mb-2 col-3">
                                    <label for="schoolComplexId" class="form-label">School
                                        Complex Id</label>
                                    <input type="input" class="form-control"
                                        id="schoolComplexId" >
                                </div>
                            </div>
                            <div class="row">
                                <div class="mb-2 col-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="Email" class="form-control"
                                        id="email" >
                                </div>
                                <div class="mb-2 col-3">
                                    <label for="mobile" class="form-label">Mobile
                                        </label>
                                    <input type="input" class="form-control"
                                        id="mobile" >
                                </div>
                                
                            </div>
                            <div class="row mt-2">
 
                                <div class="mb-2 col-5">
                                    <label for="tenable" class="form-label text-danger">
                                        *Have you attened any Traning before: </label>
                                </div>
                                <div class="mb-2 col-1">
                                <input type="radio" name="options" value="enable" id="enableRadioTrani"> Yes
                                </div>
                                <div class="mb-2 col-2">
                                    <input type="radio" name="options" value="disable" id="disableRadioTrani"> No
                                </div>
                            </div>
 
                            <div class="mb-2 col-3">
                                    <label for="tenable">Traning Name(if Attened):</label> 
                                    <input type="text" id="tenable"  class="form-control" placeholder="Type something here" disabled>
                            </div>
                            <button type="submit" class="btn btn-primary" id="form" >Submit</button>
                        </form>
                   </div>
                   </div>
                </div>    
  <script>
    $(document).ready(function() {
        $("form").submit(function (event) {
            event.preventDefault();

            var urlParams = new URLSearchParams(window.location.search);
            var refPlannerId = urlParams.get('ref_planner_id');

            var formData = {
                treasuryid: $("#treasuryId").val(),
                ref_planner_id: refPlannerId
            };

            $.ajax({
                type: "POST",
                url: "/api/savetrainings",
                contentType: "application/json",
                data: JSON.stringify(formData),
                success: function(response) {
                    console.log("POST request successful:", response);
                    alert("Training Applied successfully ! ! !");

                    // Make another AJAX request after the first one is successful
                   

                    $.ajax({
    type: "POST",
    url: "/api/processData",
    data: { treasuryId: $("#treasuryId").val() },
    success: function(anotherResponse) {
        console.log("Second request successful:", anotherResponse);
        // Handle the response of the second request
    },
    error: function(xhr, status, error) {
        console.error("Second request error: ", error);
        // Handle errors for the second request
    }
});

                    // Redirect to another page after a delay
                    setTimeout(function() {
                        window.location.href = "./trainee?treasuryId=" + $("#treasuryId").val();
                    }, 2000); 
                },
                error: function(xhr, status, error) {
                    console.error("POST request error: ", error);
                }
            });
        });

        $("input[name='options']").change(function() {
            if ($("#enableRadioTrani").is(":checked")) {
                $("#tenable").prop("disabled", false);
            } else {
                $("#tenable").prop("disabled", true);
            }
        });
    });
</script>

                <!-- For *Goverment or Treasury Employee: -->
                <script>
                    // Get the radio buttons and the target field for *Goverment or Treasury Employee:
                    const enableRadio = document.getElementById('enableRadio');
                    const disableRadio = document.getElementById('disableRadio');
                    const treasuryId = document.getElementById('treasuryId');
            
                    // Add event listeners to the radio buttons
                    enableRadio.addEventListener('click', function () {
                        treasuryId.disabled = false;
                    });
            
                    disableRadio.addEventListener('click', function () {
                        treasuryId.disabled = true;
                    });
                </script>
 
                <!-- for  tranning -->
 
                <script>
                    // Get the radio buttons and the target field
                    const enableRadiot = document.getElementById('enableRadioTrani');
                    const disableRadiot = document.getElementById('disableRadioTrani');
                    const targetFieldt = document.getElementById('tenable');
            
                    // Add event listeners to the radio buttons
                    enableRadiot.addEventListener('click', function () {
                        targetFieldt.disabled = false;
                    });
            
                    disableRadiot.addEventListener('click', function () {
                        targetFieldt.disabled = true;
                    });
                </script>
                
 
            </div>
 
 
            <!-- ################view Tranning  ######################### -->
            <div class="container mt-2 tab-content" id="tab3" style="display: none;">
 
                <div class="card mt-2">
                    <div class="card-header"><b>View Traning</b></div>
                    <div class="card-body">
                        <div id="viewTraning"></div>
                      <div class="table-responsive">
            <table class="table table-hover" id="mytraining">
                <thead>
                    <tr>
                        <th>Treasury Id</th>
                        <th>Training Name</th>
                        <th>Training Mode</th>
                        <th>Training description</th>
                        <th>Training start to end date</th>
                        <th>Venue Name</th>
                        <th>Venue Address</th>
                        <th>Venue Contact</th>
                        <th>Trainer Name</th>
                        
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
      </div>
    </div>
 </div>
 <script>
    $(document).ready(function () {
        $("#mytrainings").click(function () {
           var urlParams = new URLSearchParams(window.location.search);
            var searchTerm = urlParams.get('treasuryid');

            $.ajax({
                type: "GET",
                url: "/api/mytrainings?treasuryid=" +searchTerm,
                dataType: "json",
                success: function (data) {
                    displayTrainingData(data);
                },
                error: function (xhr, status, error) {
                    console.error("API request error: " + error);
                }
            });
        });
 
        function displayTrainingData(data) {
            var trainings = data;
            trainings.reverse();
            var tableBody = $("#mytraining tbody");
 
            // Clear existing rows
            tableBody.empty();
 
            for (var i = 0; i < trainings.length; i++) {
                var training = trainings[i];
                var row = $("<tr></tr>");
 
                row.append("<td>" + training.treasuryid + "</td>");
                row.append("<td>" + training.tname + "</td>");
                row.append("<td>" + training.tmode + "</td>");
                row.append("<td>" + training.tdescription + "</td>");
                row.append("<td>" + training.startdate + "to" +training.enddate+ "</td>");     
                row.append("<td>" + training.vname + "</td>");
                row.append("<td>" + training.vaddress + "</td>");
                row.append("<td>" + training.vcontact + "</td>");
                row.append("<td>" + training.trainername + "</td>");
               
                tableBody.append(row);
            }
        }
    });	
 	</script>         
            <!--  script for show hide-->
            <script>
                function showTab(tabId) {
                    var tabs = document.querySelectorAll('.tab-content');
                    for (var i = 0; i < tabs.length; i++) {
                        tabs[i].style.display = 'none';
                    }
 
                    var tabToShow = document.getElementById(tabId);
                    if (tabToShow) {
                        tabToShow.style.display = 'block';
                    }
                }
            </script>
 
            <!-- Bootstrap core JS-->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
            <!-- Core theme JS-->
            <script src="js/scripts.js"></script>
</body>
</html>